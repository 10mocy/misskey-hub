"use strict";(self.webpackChunkmisskey_hub=self.webpackChunkmisskey_hub||[]).push([[5807],{9085:(e,n,s)=>{s.r(n),s.d(n,{default:()=>dn});var a=s(6252);const l=(0,a._)("h1",{id:"トラブルシューティング",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#トラブルシューティング","aria-hidden":"true"},"#"),(0,a.Uk)(" トラブルシューティング")],-1),r=(0,a._)("p",null,[(0,a._)("small",null,"2018年10月07日 / 2021年8月20日 最終更新")],-1),t=(0,a._)("p",null,[(0,a.Uk)("MisskeyInstallBattle参加者が増えましたが、それに伴い時期を追うごとに重軽傷者が増加しています。"),(0,a._)("br"),(0,a.Uk)(" この記事ではそのような負傷者を減らすため、過去に事故が起きてしまった個所の傾向と対策をわかりやすく解説します。")],-1),p=(0,a.Uk)("まず最初に、"),o={href:"https://github.com/syuilo/misskey/blob/develop/docs/setup.ja.md",target:"_blank",rel:"noopener noreferrer"},i=(0,a.Uk)("公式ドキュメント（setup.md）"),c=(0,a.Uk)("を熟読してください。"),m=(0,a.Uk)("また、拙著の"),u={href:"https://hide.ac/articles/iFwm5HDvH",target:"_blank",rel:"noopener noreferrer"},d=(0,a.Uk)("Ubuntu向けsystemd版解説"),h=(0,a.Uk)("、"),b={href:"https://hide.ac/articles/csERs-7SU",target:"_blank",rel:"noopener noreferrer"},k=(0,a.Uk)("Oracle Cloud版詳細解説"),g=(0,a.Uk)("も参考までにお読みいただけると幸いです。"),y=(0,a._)("h1",{id:"ubuntu向けシェルスクリプトのお知らせ",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#ubuntu向けシェルスクリプトのお知らせ","aria-hidden":"true"},"#"),(0,a.Uk)(" Ubuntu向けシェルスクリプトのお知らせ")],-1),_=(0,a._)("p",null,"Ubuntu向け解説はコピペばかりでつまらない！時間がかかる！とにかく面倒！",-1),f=(0,a._)("p",null,"……あれ、コピペだけでできるなら、つまり完全自動化できるのでは？",-1),U=(0,a.Uk)("というわけで、"),v=(0,a._)("strong",null,"シェルスクリプトでほぼ全部やってくれるやつを作ってみました！",-1),x=(0,a._)("br",null,null,-1),L={href:"https://github.com/joinmisskey/bash-install#readme",target:"_blank",rel:"noopener noreferrer"},W=(0,a._)("strong",null,"詳細と使用方法はこちらから！",-1),S=(0,a.Uk)(" https://github.com/joinmisskey/bash-install#readme"),M=(0,a._)("p",null,"ドメインの購入とCloudflareのセットアップ、サーバーの確保についてはご自身でご準備ください。",-1),E=(0,a.Uk)("シェルスクリプトに不具合があれば"),T={href:"https://p1.a9z.dev/@aqz",target:"_blank",rel:"noopener noreferrer"},A=(0,a.Uk)("私へのリプライ等"),w=(0,a.Uk)("やこちらのコメント欄にてお知らせいただければと思います。"),j=(0,a._)("h1",{id:"インストールとビルド",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#インストールとビルド","aria-hidden":"true"},"#"),(0,a.Uk)(" インストールとビルド")],-1),P={href:"https://github.com/syuilo/misskey/blob/develop/docs/setup.ja.md",target:"_blank",rel:"noopener noreferrer"},R=(0,a.Uk)("公式ドキュメント（setup.md）"),B=(0,a.Uk)("をよく読みましょう。"),C=(0,a.uE)('<h2 id="imagemagick関連" tabindex="-1"><a class="header-anchor" href="#imagemagick関連" aria-hidden="true">#</a> ImageMagick関連</h2><p><em><strong>ImageMagickは不要です！</strong></em></p><h2 id="ビルドが失敗する" tabindex="-1"><a class="header-anchor" href="#ビルドが失敗する" aria-hidden="true">#</a> ビルドが失敗する</h2><p>Misskeyのビルドには、経験則上、最低でも2GBのメモリが必要となっています。<br> サーバーをスケールアップする手もありますが、お使いのPCでビルドしてサーバーにデプロイするという手もあります。</p><h2 id="なんだかうまくいかない" tabindex="-1"><a class="header-anchor" href="#なんだかうまくいかない" aria-hidden="true">#</a> なんだかうまくいかない</h2>',5),D={href:"https://github.com/syuilo/misskey/blob/develop/docs/setup.ja.md",target:"_blank",rel:"noopener noreferrer"},Y=(0,a.Uk)("公式ドキュメント（setup.md）"),N=(0,a.Uk)("をよく読みましょう。"),F=(0,a._)("li",null,[(0,a._)("p",null,"node.jsのバージョンが古い"),(0,a._)("ul",null,[(0,a._)("li",null,"新しめのバージョンにしましょう。")])],-1),I=(0,a._)("li",null,[(0,a._)("p",null,[(0,a.Uk)("インストールやビルドの際にErrorとかWARNとかが出てくることがありますが、問題ない場合もあります。とりあえず"),(0,a._)("code",null,"npm start"),(0,a.Uk)("して動作確認しちゃいましょう。")])],-1),z=(0,a._)("p",null,"node-gypがインストールされていない",-1),O={href:"https://github.com/syuilo/misskey/blob/develop/docs/setup.ja.md#6-misskey%E3%81%AE%E3%83%93%E3%83%AB%E3%83%89",target:"_blank",rel:"noopener noreferrer"},q=(0,a.Uk)("setup.mdのこの項目"),H=(0,a.Uk)("を試す。"),G=(0,a.Uk)("Windowsは"),J={href:"https://qiita.com/AkihiroTakamura/items/25ba516f8ec624e66ee7",target:"_blank",rel:"noopener noreferrer"},Q=(0,a.Uk)("この記事"),Z=(0,a.Uk)("も参考にしてみる。"),V=(0,a.Uk)("これでもだめそうだったら、最初から"),K={href:"https://github.com/syuilo/misskey/blob/develop/docs/setup.ja.md",target:"_blank",rel:"noopener noreferrer"},X=(0,a.Uk)("公式ドキュメント（setup.md）"),$=(0,a.Uk)("の手順に従ってやり直してみてください。"),ee=(0,a._)("h2",{id:"バージョンアップ後に不具合が発生した",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#バージョンアップ後に不具合が発生した","aria-hidden":"true"},"#"),(0,a.Uk)(" バージョンアップ後に不具合が発生した")],-1),ne={href:"https://github.com/syuilo/misskey/blob/develop/docs/setup.ja.md",target:"_blank",rel:"noopener noreferrer"},se=(0,a.Uk)("公式ドキュメント（setup.md）"),ae=(0,a.Uk)("をよく読みましょう。"),le=(0,a._)("li",null,[(0,a.Uk)("Misskeyのバージョンアップ時にはしっかり"),(0,a._)("code",null,"yarn install"),(0,a.Uk)("や"),(0,a._)("code",null,"npm run migrate"),(0,a.Uk)("してください。それでも直らない場合、"),(0,a._)("code",null,"npm run clean"),(0,a.Uk)("を試し、"),(0,a._)("code",null,"npm run build && npm run migrate && npm start"),(0,a.Uk)("してみてください。")],-1),re=(0,a._)("li",null,[(0,a.Uk)("node.jsのバージョンを変更した場合、"),(0,a._)("code",null,"yarn rebuild && yarn install && npm run clean && npm run build"),(0,a.Uk)("してみてください。")],-1),te=(0,a.Uk)("これでもだめそうだったら、最初から"),pe={href:"https://github.com/syuilo/misskey/blob/develop/docs/setup.ja.md",target:"_blank",rel:"noopener noreferrer"},oe=(0,a.Uk)("公式ドキュメント（setup.md）"),ie=(0,a.Uk)("の手順に従ってやり直してみてください。"),ce=(0,a._)("hr",null,null,-1),me=(0,a._)("h1",{id:"設定",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#設定","aria-hidden":"true"},"#"),(0,a.Uk)(" 設定")],-1),ue={href:"https://github.com/syuilo/misskey/blob/develop/docs/setup.ja.md",target:"_blank",rel:"noopener noreferrer"},de=(0,a.Uk)("公式ドキュメント（setup.md）"),he=(0,a.Uk)("をよく読みましょう。"),be=(0,a._)("code",null,".config/default.yml",-1),ke=(0,a.Uk)("で設定を行います。 "),ge={href:"https://github.com/syuilo/misskey/blob/develop/.config/example.yml",target:"_blank",rel:"noopener noreferrer"},ye=(0,a._)("code",null,".config/example.yml",-1),_e=(0,a.Uk)("をコピーし、コメントに従って記述します。"),fe=(0,a._)("p",null,[(0,a.Uk)("（YAML形式では、"),(0,a._)("code",null,"#"),(0,a.Uk)("から行末まではコメントとして扱われます。）")],-1),Ue=(0,a._)("h2",{id:"urlとポート番号",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#urlとポート番号","aria-hidden":"true"},"#"),(0,a.Uk)(" URLとポート番号")],-1),ve=(0,a._)("p",null,"URLとポート番号のしくみは、少し分かりにくいと思います。",-1),xe=(0,a._)("h3",{id:"url-ポートとtls証明書の設定-port-and-tls-settings-part-a-example-ymlの解説",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#url-ポートとtls証明書の設定-port-and-tls-settings-part-a-example-ymlの解説","aria-hidden":"true"},"#"),(0,a.Uk)(" URL, ポートとTLS証明書の設定（Port and TLS settings）part A: example.ymlの解説")],-1),Le=(0,a.Uk)("リビジョン番号"),We={href:"https://github.com/misskey-dev/misskey/blob/85a0f696bcea779b02749dae596fff94a1df2467/.config/example.yml",target:"_blank",rel:"noopener noreferrer"},Se=(0,a.Uk)("85a0f69"),Me=(0,a.Uk)("時点での"),Ee={href:"https://github.com/syuilo/misskey/blob/develop/.config/example.yml",target:"_blank",rel:"noopener noreferrer"},Te=(0,a.Uk)(".config/example.yml"),Ae=(0,a.Uk)("に、「Port and TLS settings」として説明図付きで順に書かれていますので、それに沿って設定をしていきましょう。 本文の解説を日本語訳しながらやっていきます。"),we=(0,a.uE)('<h4 id="urlの設定" tabindex="-1"><a class="header-anchor" href="#urlの設定" aria-hidden="true">#</a> URLの設定</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># Final accessible URL seen by a user.</span>\n<span class="token comment"># 最終的にユーザーがアクセスするURL</span>\n<span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.tld/\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong><code>url: </code>には、インスタンスにブラウザでアクセスしたときアドレスバーに表示される</strong>(したい)<strong>URLを書きます。</strong></p><h4 id="ポートと証明書の設定" tabindex="-1"><a class="header-anchor" href="#ポートと証明書の設定" aria-hidden="true">#</a> ポートと証明書の設定</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>\n<span class="token comment">#   ┌───────────────────────┐</span>\n<span class="token comment">#───┘ Port and TLS settings └───────────────────────────────────</span>\n<span class="token comment">#### ポートと証明書の設定      ####################################</span>\n<span class="token comment">#</span>\n<span class="token comment"># Misskey supports two deployment options for public.</span>\n<span class="token comment"># Misskeyは2つのインスタンス開設方法をサポートしています。</span>\n<span class="token comment">#</span>\n\n<span class="token comment"># Option 1: With Reverse Proxy</span>\n<span class="token comment"># 方法その1 リバースプロキシを挟む</span>\n<span class="token comment">#</span>\n<span class="token comment">#                 +----- https://example.tld/ ------------+</span>\n<span class="token comment">#   +------+      |+-------------+      +----------------+|</span>\n<span class="token comment">#   | User | ---&gt; || Proxy (443) | ---&gt; | Misskey (3000) ||</span>\n<span class="token comment">#   +------+      |+-------------+      +----------------+|</span>\n<span class="token comment">#                 +---------------------------------------+</span>\n<span class="token comment">#</span>\n<span class="token comment">#   You need to setup reverse proxy. (eg. Nginx)</span>\n<span class="token comment">#   この方法では、リバースプロキシ（例: Nginx）をセットアップする必要があります。</span>\n<span class="token comment">#   You do not define &#39;https&#39; section.</span>\n<span class="token comment">#   &#39;https&#39;セクション（後述）は設定せず、コメントアウトしたままにします。</span>\n\n<span class="token comment"># Option 2: Standalone</span>\n<span class="token comment"># 方法その2 スタンドアロン</span>\n<span class="token comment">#           (リバースプロキシを挟まず、nodeのプロセスで直接ユーザーからのアクセスを受ける)</span>\n<span class="token comment">#</span>\n<span class="token comment">#                 +- https://example.tld/ -+</span>\n<span class="token comment">#   +------+      |   +---------------+    |</span>\n<span class="token comment">#   | User | ---&gt; |   | Misskey (443) |    |</span>\n<span class="token comment">#   +------+      |   +---------------+    |</span>\n<span class="token comment">#                 +------------------------+</span>\n<span class="token comment">#</span>\n<span class="token comment">#   You need to run Misskey as root.</span>\n<span class="token comment">#   この方法では、Misskeyをルート(の権限をもたせた状態)で実行する必要があります。</span>\n<span class="token comment">#   You need to set Certificate in &#39;https&#39; section.</span>\n<span class="token comment">#   &#39;https&#39;セクション(後述)で証明書の設定を行う必要があります。</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h5 id="方法1-リバースプロキシを挟むとき" tabindex="-1"><a class="header-anchor" href="#方法1-リバースプロキシを挟むとき" aria-hidden="true">#</a> 方法1 リバースプロキシを挟むとき</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># To use option 1, uncomment below line.</span>\n<span class="token comment"># オプション1で設定する場合、以下の行をコメントアウトします　→ しました</span>\n<span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">3000</span>    <span class="token comment"># A port that your Misskey server should listen.</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>以上の3行は、リバースプロキシを挟むときの話です。 この例では、Misskeyはポート3000で通信します。 リバースプロキシでは、ローカル側の宛先にこのポート番号を指定します。</p><h5 id="方法2-リバースプロキシを挟まないとき" tabindex="-1"><a class="header-anchor" href="#方法2-リバースプロキシを挟まないとき" aria-hidden="true">#</a> 方法2 リバースプロキシを挟まないとき</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># To use option 2, uncomment below lines.</span>\n<span class="token comment"># オプション2で設定する場合は、以下の6行をコメントアウトします　→ しました</span>\n<span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">443</span>\n\n<span class="token key atrule">https</span><span class="token punctuation">:</span>\n  <span class="token comment"># path for certification</span>\n  <span class="token key atrule">key</span><span class="token punctuation">:</span> /etc/letsencrypt/live/example.tld/privkey.pem\n  <span class="token key atrule">cert</span><span class="token punctuation">:</span> /etc/letsencrypt/live/example.tld/fullchain.pem\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>以上の8行は、リバースプロキシを挟まないときの話です。 ポート443(https)で直接ユーザーと通信します（ポート443を利用するのでMisskeyのプロセスにはルート権限が必要です）。</p><p>TLS証明書を別途取得し、取得した証明書のディレクトリを<code>https:</code>で設定します。 ここ書かれているのは、Let&#39;s Encryptで<code>example.tld</code>に対する証明書を発行したときの例です。</p><hr><h3 id="url-ポートとtls証明書の設定-port-and-tls-settings-part-b-全体像" tabindex="-1"><a class="header-anchor" href="#url-ポートとtls証明書の設定-port-and-tls-settings-part-b-全体像" aria-hidden="true">#</a> URL, ポートとTLS証明書の設定（Port and TLS settings）part B: 全体像</h3><p>example.ymlの解説文を省くと、default.ymlにおけるポートとTLS証明書の設定は以下のようになります。</p><h4 id="方法1-リバースプロキシを挟むとき-1" tabindex="-1"><a class="header-anchor" href="#方法1-リバースプロキシを挟むとき-1" aria-hidden="true">#</a> 方法1 リバースプロキシを挟むとき</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.tld/\n<span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">3000</span>\n<span class="token comment"># https:</span>\n<span class="token comment">#   # path for certification</span>\n<span class="token comment">#   key: /etc/letsencrypt/live/example.tld/privkey.pem</span>\n<span class="token comment">#   cert: /etc/letsencrypt/live/example.tld/fullchain.pem</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="方法2-リバースプロキシを挟まず直接通信するとき" tabindex="-1"><a class="header-anchor" href="#方法2-リバースプロキシを挟まず直接通信するとき" aria-hidden="true">#</a> 方法2 リバースプロキシを挟まず直接通信するとき</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.tld/\n<span class="token comment"># port: 3000</span>\n<span class="token key atrule">https</span><span class="token punctuation">:</span>\n  <span class="token comment"># path for certification</span>\n  <span class="token key atrule">key</span><span class="token punctuation">:</span> /etc/letsencrypt/live/example.tld/privkey.pem\n  <span class="token key atrule">cert</span><span class="token punctuation">:</span> /etc/letsencrypt/live/example.tld/fullchain.pem\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><h1 id="npm-startやアクセス時によく遭遇するエラー" tabindex="-1"><a class="header-anchor" href="#npm-startやアクセス時によく遭遇するエラー" aria-hidden="true">#</a> <code>npm start</code>やアクセス時によく遭遇するエラー</h1><p><code>npm start</code>でサーバーを立てられたものの、その後不具合に遭遇してしまう場合もあります。</p>',22),je=(0,a.Uk)("まず、"),Pe={href:"https://github.com/syuilo/misskey/blob/develop/docs/setup.ja.md",target:"_blank",rel:"noopener noreferrer"},Re=(0,a.Uk)("公式ドキュメント（setup.md）"),Be=(0,a.Uk)("をよく読みましょう。"),Ce=(0,a.uE)('<h2 id="yamlのエラーが出る" tabindex="-1"><a class="header-anchor" href="#yamlのエラーが出る" aria-hidden="true">#</a> YAMLのエラーが出る</h2><p><code>default.yml</code>の構文にミスがある可能性があります。 行頭に余分なスペースはありませんか？</p><h2 id="redisに接続できない" tabindex="-1"><a class="header-anchor" href="#redisに接続できない" aria-hidden="true">#</a> redisに接続できない</h2><p>redis-serverは起動していますか？ 何らかの接続数の上限に達していませんか？</p><p>11.20.2より前のバージョンのMisskeyはredisのパスワードを解くことができません。以下の2点を確認してください。</p><ul><li>redisにパスワードを設定しない。</li><li><code>default.yml</code>の<code>redis:</code>の<code>pass:</code>の行をコメントアウトする。</li></ul><h2 id="上部に「開発ビルドです」と書かれた赤いバーが表示される" tabindex="-1"><a class="header-anchor" href="#上部に「開発ビルドです」と書かれた赤いバーが表示される" aria-hidden="true">#</a> 上部に「開発ビルドです」と書かれた赤いバーが表示される</h2><p>インスタンスを公開する場合は必ずproductionビルドを使いましょう。</p><p>製品ビルドにするには、環境変数が<code>NODE_ENV=production</code>になるように設定し<code>npm run build &amp;&amp; npm start</code>します。</p><h2 id="新規登録できない" tabindex="-1"><a class="header-anchor" href="#新規登録できない" aria-hidden="true">#</a> 新規登録できない</h2><p>APIに接続できないようです。 <code>default.yml</code>の冒頭の<code>url:</code>が正しく設定されているか確認しましょう。 Node.jsのバージョンや、インストールの設定ももう一度よく確認しましょう。</p><p>また、正しく<code>default.yml</code>が書かれていますか？</p><h2 id="タイムラインの表示に問題が発生する、リアルタイムでtlが更新されない" tabindex="-1"><a class="header-anchor" href="#タイムラインの表示に問題が発生する、リアルタイムでtlが更新されない" aria-hidden="true">#</a> タイムラインの表示に問題が発生する、リアルタイムでTLが更新されない</h2><p>タイムラインの読み込みに失敗する場合、mongoDBやPostgreSQLのバージョンが古い可能性があります。 mongoDBはバージョン4以上になっていますか？PostgreSQLはなるべくv13にしてください。</p><p>redisの接続も確認した方がよいでしょう。 <a href="#redis%E3%81%AB%E6%8E%A5%E7%B6%9A%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%84%EF%BC%9F">→ redisに接続できない？ を参照</a></p><h2 id="永遠に「再接続中」と右下に表示される、リアルタイムでtlが更新されない" tabindex="-1"><a class="header-anchor" href="#永遠に「再接続中」と右下に表示される、リアルタイムでtlが更新されない" aria-hidden="true">#</a> 永遠に「再接続中」と右下に表示される、リアルタイムでTLが更新されない</h2><p>プロキシを利用している場合、それがWebSocket通信を阻害している可能性が考えられます。</p><h2 id="オブジェクトストレージ使用時、不具合が出る" tabindex="-1"><a class="header-anchor" href="#オブジェクトストレージ使用時、不具合が出る" aria-hidden="true">#</a> オブジェクトストレージ使用時、不具合が出る</h2><p>オブジェクトストレージの権限の設定が厳しくなっている可能性があります。「ファイル（オブジェクト）が誰でも取得可能」なように権限を設定してみてください。 また、<code>default.yml</code>をもう一度確認してみてください。</p><h3 id="s3-example-with-cdn-custom-domain" tabindex="-1"><a class="header-anchor" href="#s3-example-with-cdn-custom-domain" aria-hidden="true">#</a> S3 example (with CDN, custom domain)</h3><p>S3 example (with CDN, custom domain)は、AWSのデフォルトのドメインではなく独自ドメインでストレージを公開したい場合の設定です。 endpointと公開ドメインが同じサービスの場合はS3 exampleのように<code>baseUrl</code>は明記しなくてよく、さらにregionの概念がないサービスの場合はregionの行は必要ありません。</p><h3 id="s3互換サービスでの設定" tabindex="-1"><a class="header-anchor" href="#s3互換サービスでの設定" aria-hidden="true">#</a> S3互換サービスでの設定</h3>',22),De=(0,a.Uk)("Misskeyではオブジェクトストレージの接続に"),Ye={href:"https://www.npmjs.com/package/aws-sdk",target:"_blank",rel:"noopener noreferrer"},Ne=(0,a.Uk)("aws-sdk"),Fe=(0,a.Uk)("を利用しています。 Amazon S3に互換性のあるオブジェクトストレージであれば利用できる可能性があります。"),Ie=(0,a._)("p",null,"各サービス/ソフトウェアのドキュメントをよく読み、設定してみてください。",-1),ze=(0,a._)("hr",null,null,-1),Oe=(0,a._)("h1",{id:"まったく解決しなかった場合",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#まったく解決しなかった場合","aria-hidden":"true"},"#"),(0,a.Uk)(" まったく解決しなかった場合")],-1),qe=(0,a._)("p",null,"以下の順序を試してみてください。",-1),He=(0,a._)("li",null,"Misskeyのドキュメントをよく読む。",-1),Ge=(0,a._)("li",null,"Googleで検索してみる（もっとも、これを読んでいる方は検索から来たものと思いますが...。検索結果には古いバージョンの記事も混じっているので注意しましょう。ツール > 期間指定で期間を指定すると吉。この記事も古くなっているかも……）。",-1),Je={href:"https://github.com/syuilo/misskey/issues",target:"_blank",rel:"noopener noreferrer"},Qe=(0,a.Uk)("MisskeyリポジトリのIssues"),Ze=(0,a.Uk)("を検索してみる（同じエラーに遭遇している場合や、Misskeyのバグの可能性もあります）。"),Ve={href:"https://forum.misskey.io/",target:"_blank",rel:"noopener noreferrer"},Ke=(0,a.Uk)("Misskey Forum"),Xe=(0,a.Uk)("を検索してみる。"),$e=(0,a.Uk)("検索してどうしても見つからなかったら、専門家に質問してみてください。 "),en=(0,a.Uk)("Forumや"),nn={href:"https://discord.gg/P4yYqYBjEp",target:"_blank",rel:"noopener noreferrer"},sn=(0,a.Uk)("MisskeyのDiscordサーバー"),an=(0,a.Uk)("もしくは"),ln={href:"https://discord.gg/mJJGAHv",target:"_blank",rel:"noopener noreferrer"},rn=(0,a.Uk)("「鯖缶工場」"),tn=(0,a.Uk)("で聞いてみる"),pn=(0,a.Uk)("開発者（"),on={href:"https://p1.a9z.dev/@aqz",target:"_blank",rel:"noopener noreferrer"},cn=(0,a.Uk)("私"),mn=(0,a.Uk)("やしゅいろ）にリプライやダイレクト投稿を送信して聞いてみる"),un={},dn=(0,s(3744).Z)(un,[["render",function(e,n){const s=(0,a.up)("OutboundLink");return(0,a.wg)(),(0,a.iD)(a.HY,null,[l,r,t,(0,a._)("p",null,[(0,a._)("strong",null,[p,(0,a._)("a",o,[i,(0,a.Wm)(s)]),c])]),(0,a._)("p",null,[m,(0,a._)("a",u,[d,(0,a.Wm)(s)]),h,(0,a._)("a",b,[k,(0,a.Wm)(s)]),g]),y,_,f,(0,a._)("p",null,[U,v,x,(0,a._)("a",L,[W,S,(0,a.Wm)(s)])]),M,(0,a._)("p",null,[E,(0,a._)("a",T,[A,(0,a.Wm)(s)]),w]),j,(0,a._)("p",null,[(0,a._)("a",P,[R,(0,a.Wm)(s)]),B]),C,(0,a._)("ul",null,[(0,a._)("li",null,[(0,a._)("p",null,[(0,a._)("a",D,[Y,(0,a.Wm)(s)]),N])]),F,I,(0,a._)("li",null,[z,(0,a._)("ul",null,[(0,a._)("li",null,[(0,a._)("a",O,[q,(0,a.Wm)(s)]),H]),(0,a._)("li",null,[G,(0,a._)("a",J,[Q,(0,a.Wm)(s)]),Z])])]),(0,a._)("li",null,[(0,a._)("p",null,[V,(0,a._)("a",K,[X,(0,a.Wm)(s)]),$])])]),ee,(0,a._)("ul",null,[(0,a._)("li",null,[(0,a._)("a",ne,[se,(0,a.Wm)(s)]),ae]),le,re,(0,a._)("li",null,[te,(0,a._)("a",pe,[oe,(0,a.Wm)(s)]),ie])]),ce,me,(0,a._)("p",null,[(0,a._)("a",ue,[de,(0,a.Wm)(s)]),he]),(0,a._)("p",null,[be,ke,(0,a._)("a",ge,[ye,(0,a.Wm)(s)]),_e]),fe,Ue,ve,xe,(0,a._)("p",null,[Le,(0,a._)("a",We,[Se,(0,a.Wm)(s)]),Me,(0,a._)("a",Ee,[Te,(0,a.Wm)(s)]),Ae]),we,(0,a._)("p",null,[je,(0,a._)("a",Pe,[Re,(0,a.Wm)(s)]),Be]),Ce,(0,a._)("p",null,[De,(0,a._)("a",Ye,[Ne,(0,a.Wm)(s)]),Fe]),Ie,ze,Oe,qe,(0,a._)("ol",null,[He,Ge,(0,a._)("li",null,[(0,a._)("a",Je,[Qe,(0,a.Wm)(s)]),Ze]),(0,a._)("li",null,[(0,a._)("a",Ve,[Ke,(0,a.Wm)(s)]),Xe]),(0,a._)("li",null,[$e,(0,a._)("ol",null,[(0,a._)("li",null,[en,(0,a._)("a",nn,[sn,(0,a.Wm)(s)]),an,(0,a._)("a",ln,[rn,(0,a.Wm)(s)]),tn]),(0,a._)("li",null,[pn,(0,a._)("a",on,[cn,(0,a.Wm)(s)]),mn])])])])],64)}]])},3744:(e,n)=>{n.Z=(e,n)=>{for(const[s,a]of n)e[s]=a;return e}},6310:(e,n,s)=>{s.r(n),s.d(n,{data:()=>a});const a={key:"v-01f38fba",path:"/docs/admin/troubleshooting.html",title:"トラブルシューティング",lang:"ja-JP",frontmatter:{},excerpt:"",headers:[{level:2,title:"ImageMagick関連",slug:"imagemagick関連",children:[]},{level:2,title:"ビルドが失敗する",slug:"ビルドが失敗する",children:[]},{level:2,title:"なんだかうまくいかない",slug:"なんだかうまくいかない",children:[]},{level:2,title:"バージョンアップ後に不具合が発生した",slug:"バージョンアップ後に不具合が発生した",children:[]},{level:2,title:"URLとポート番号",slug:"urlとポート番号",children:[{level:3,title:"URL, ポートとTLS証明書の設定（Port and TLS settings）part A: example.ymlの解説",slug:"url-ポートとtls証明書の設定-port-and-tls-settings-part-a-example-ymlの解説",children:[]},{level:3,title:"URL, ポートとTLS証明書の設定（Port and TLS settings）part B: 全体像",slug:"url-ポートとtls証明書の設定-port-and-tls-settings-part-b-全体像",children:[]}]},{level:2,title:"YAMLのエラーが出る",slug:"yamlのエラーが出る",children:[]},{level:2,title:"redisに接続できない",slug:"redisに接続できない",children:[]},{level:2,title:"上部に「開発ビルドです」と書かれた赤いバーが表示される",slug:"上部に「開発ビルドです」と書かれた赤いバーが表示される",children:[]},{level:2,title:"新規登録できない",slug:"新規登録できない",children:[]},{level:2,title:"タイムラインの表示に問題が発生する、リアルタイムでTLが更新されない",slug:"タイムラインの表示に問題が発生する、リアルタイムでtlが更新されない",children:[]},{level:2,title:"永遠に「再接続中」と右下に表示される、リアルタイムでTLが更新されない",slug:"永遠に「再接続中」と右下に表示される、リアルタイムでtlが更新されない",children:[]},{level:2,title:"オブジェクトストレージ使用時、不具合が出る",slug:"オブジェクトストレージ使用時、不具合が出る",children:[{level:3,title:"S3 example (with CDN, custom domain)",slug:"s3-example-with-cdn-custom-domain",children:[]},{level:3,title:"S3互換サービスでの設定",slug:"s3互換サービスでの設定",children:[]}]}],filePathRelative:"docs/admin/troubleshooting.md",git:{updatedTime:1631291596e3,contributors:[{name:"syuilo",email:"Syuilotan@yahoo.co.jp",commits:1}]},relatedPages:[{title:"Troubleshooting guide",path:"/en/docs/admin/troubleshooting.html",summary:""}]}}}]);