"use strict";(self.webpackChunkmisskey_hub=self.webpackChunkmisskey_hub||[]).push([[742],{5767:(e,s,l)=>{l.r(s),l.d(s,{default:()=>b});var a=l(6252);const n=(0,a.uE)('<h1 id="dockerを使ったmisskey構築" tabindex="-1"><a class="header-anchor" href="#dockerを使ったmisskey構築" aria-hidden="true">#</a> Dockerを使ったMisskey構築</h1><p>このガイドはDockerを使ったMisskeyセットアップ方法を説明します。</p><h2 id="リポジトリの取得" tabindex="-1"><a class="header-anchor" href="#リポジトリの取得" aria-hidden="true">#</a> リポジトリの取得</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> clone -b master git://github.com/misskey-dev/misskey.git\n<span class="token builtin class-name">cd</span> misskey\n<span class="token function">git</span> checkout master\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="設定" tabindex="-1"><a class="header-anchor" href="#設定" aria-hidden="true">#</a> 設定</h2><p>下記コマンドで、各種設定ファイルのサンプルをコピーします。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cp</span> .config/example.yml .config/default.yml\n<span class="token function">cp</span> .config/docker_example.env .config/docker.env\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>default.yml</code>と<code>docker.env</code>をファイル内の説明に従って編集してください。</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p><code>default.yml</code>の、Postgresql/Redisのホストはそれぞれ<code>db</code>/<code>redis</code>にしてください。</p></div><p>必要に応じて、<code>docker-compose.yml</code>を編集します。(ポートを変更したい場合など)</p><h2 id="ビルド" tabindex="-1"><a class="header-anchor" href="#ビルド" aria-hidden="true">#</a> ビルド</h2><p>次のコマンドでMisskeyをビルドしてください:</p><p><code>sudo docker-compose build</code></p><h2 id="データベースを初期化" tabindex="-1"><a class="header-anchor" href="#データベースを初期化" aria-hidden="true">#</a> データベースを初期化</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> docker-compose run --rm web <span class="token function">yarn</span> run init\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="起動" tabindex="-1"><a class="header-anchor" href="#起動" aria-hidden="true">#</a> 起動</h2><p>お疲れ様でした。これでMisskeyを動かす準備は整いました。</p><p><code>sudo docker-compose up -d</code>するだけです。GLHF!</p><h2 id="最新バージョンにアップデートする方法" tabindex="-1"><a class="header-anchor" href="#最新バージョンにアップデートする方法" aria-hidden="true">#</a> 最新バージョンにアップデートする方法</h2>',19),i=(0,a._)("li",null,[(0,a._)("code",null,"git stash")],-1),c=(0,a._)("li",null,[(0,a._)("code",null,"git checkout master")],-1),d=(0,a._)("li",null,[(0,a._)("code",null,"git pull")],-1),o=(0,a._)("li",null,[(0,a._)("code",null,"git submodule update --init")],-1),r=(0,a._)("li",null,[(0,a._)("code",null,"git stash pop")],-1),t=(0,a._)("li",null,[(0,a._)("code",null,"sudo docker-compose build")],-1),u=(0,a.Uk)("ChangeLog"),p=(0,a.Uk)("でマイグレーション情報を確認する"),h=(0,a._)("li",null,[(0,a._)("code",null,"sudo docker-compose stop && sudo docker-compose up -d")],-1),m=(0,a._)("h2",{id:"cliコマンドを実行する方法",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#cliコマンドを実行する方法","aria-hidden":"true"},"#"),(0,a.Uk)(" cliコマンドを実行する方法")],-1),k=(0,a._)("p",null,[(0,a._)("code",null,"sudo docker-compose run --rm web node built/tools/mark-admin @example")],-1),b={render:function(e,s){const l=(0,a.up)("RouterLink");return(0,a.wg)(),(0,a.iD)(a.HY,null,[n,(0,a._)("ol",null,[i,c,d,o,r,t,(0,a._)("li",null,[(0,a.Wm)(l,{to:"/docs/CHANGELOG.html"},{default:(0,a.w5)((()=>[u])),_:1}),p]),h]),m,k],64)}}},755:(e,s,l)=>{l.r(s),l.d(s,{data:()=>a});const a={key:"v-f4c8fb2c",path:"/docs/install/docker.html",title:"Dockerを使ったMisskey構築",lang:"ja-JP",frontmatter:{},excerpt:"",headers:[{level:2,title:"リポジトリの取得",slug:"リポジトリの取得",children:[]},{level:2,title:"設定",slug:"設定",children:[]},{level:2,title:"ビルド",slug:"ビルド",children:[]},{level:2,title:"データベースを初期化",slug:"データベースを初期化",children:[]},{level:2,title:"起動",slug:"起動",children:[]},{level:2,title:"最新バージョンにアップデートする方法",slug:"最新バージョンにアップデートする方法",children:[]},{level:2,title:"cliコマンドを実行する方法",slug:"cliコマンドを実行する方法",children:[]}],filePathRelative:"docs/install/docker.md",git:{updatedTime:1634824019e3,contributors:[{name:"syuilo",email:"Syuilotan@yahoo.co.jp",commits:2}]}}}}]);