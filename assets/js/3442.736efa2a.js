"use strict";(self.webpackChunkmisskey_hub=self.webpackChunkmisskey_hub||[]).push([[3442],{2091:(t,s,e)=>{e.r(s),e.d(s,{default:()=>w});var i=e(6252),h=e(3577),r=e(2262),o=e(2212),a=e(8311);function l(t,s,e){void 0===s&&(s=t,t=0);let i=Math.random();return e&&(i=e(Math.random(),0,1,1)),i*(s-t)+t}function p(t,s,e,i,h){return(t-s)/(e-s)*(h-i)+i}function n(t,s,e,i){return 0==t?s:e*Math.pow(2,10*(t/i-1))+s}class c{constructor(t,s,e){this.progress=0,this.rate=.01,this.system=s,this.loader=e,this.array=t.array,this.group=t.group,this.x=t.x,this.y=t.y,this.z=t.z,this.size=t.size,this.color=t.color,this.opacity=t.opacity,this.strength=t.strength,this.yBase=t.y,this.createMesh()}createMesh(){this.geometry=this.system.boxGeometry,this.material=new o.vBJ({color:this.color,transparent:!0,opacity:this.opacity,depthTest:!1,precision:"lowp"}),this.mesh=new o.Kj0(this.geometry,this.material),this.mesh.position.x=this.x,this.mesh.position.y=this.y,this.mesh.position.z=this.z,this.mesh.scale.set(this.size,this.size,this.size),this.group.add(this.mesh)}update(t){this.progress+=this.rate*this.loader.deltaTimeNormal,this.mesh.position.y=this.yBase-n(this.progress,0,1,1)*this.yBase,this.mesh.scale.set(this.size,this.size+16*this.size*n(this.progress,0,1,1),this.size),this.mesh.material.opacity=n(this.progress,0,1,1),this.progress>=1&&(this.geometry.dispose(),this.material.dispose(),this.group.remove(this.mesh),this.array.splice(t,1),this.system.createRipple(this.mesh.position.x,this.mesh.position.z,this.strength))}}class d{constructor(t,s,e){this.lerpFactor=.3,this.dampFactor=.3,this.system=s,this.loader=e,this.group=t.group,this.x=t.x,this.y=t.y,this.z=t.z,this.size=t.size,this.color=t.color,this.opacity=t.opacity,this.createMesh(),this.base=new o.Pa4(t.x,t.y,t.z),this.velocity=new o.Pa4(0,0,0)}createMesh(){this.geometry=this.system.sphereGeometry,this.material=new o.vBJ({color:this.color,transparent:!0,opacity:this.opacity,depthTest:!1,precision:"lowp"}),this.mesh=new o.Kj0(this.geometry,this.material),this.mesh.position.x=this.x,this.mesh.position.y=this.y,this.mesh.position.z=this.z,this.mesh.scale.set(this.size,this.size,this.size),this.group.add(this.mesh)}update(){let t=.075+Math.abs(this.velocity.y)/25;this.mesh.scale.set(t,t,t);let s=.15+Math.abs(this.velocity.y)/1;var e;this.mesh.material.opacity=(e=s,.15,1,Math.max(Math.min(e,1),.15)),this.velocity.y+=(this.base.y-this.mesh.position.y)*this.lerpFactor,this.velocity.multiplyScalar(this.dampFactor),this.mesh.position.add(this.velocity)}}var m=e(3882);class u{constructor(t,s,e){this.system=s,this.loader=e,this.array=t.array,this.group=t.group,this.sphere=new o.aLr(new o.Pa4(t.x,t.y,t.z),0),this.strength=t.strength?t.strength:l(7,15),this.threshold=l(4,16),this.growth=l(.2,.5),this.life=1,this.decay=l(.01,.02),this.influence=new o.Pa4;const i=[];for(let t=0;t<2*Math.PI+Math.PI/64;t+=2*Math.PI/64)i.push(Math.cos(t),Math.sin(t),0);this.geometry=new m.VJ,this.geometry.setPoints(i),this.material=new m.r7({lineWidth:.25,color:t.color,opacity:1,transparent:!0,depthTest:!1}),this.material.onBeforeRender=()=>{},this.mesh=new o.Kj0(this.geometry,this.material),this.mesh.rotation.x=Math.PI/2,this.mesh.position.x=this.sphere.center.x,this.mesh.position.y=0,this.mesh.position.z=this.sphere.center.z,this.group.add(this.mesh)}getInfluenceVector(t){this.influence.set(0,0,0);let s=this.sphere.distanceToPoint(t);if(s<=this.threshold){let h=(e=this.threshold-s,0,1,i=this.threshold,-.5*(Math.cos(Math.PI*e/i)-1)+0),r=this.strength*h*this.life;this.influence.addVectors(t,this.sphere.center).multiplyScalar(r)}var e,i;return this.influence}update(t){this.sphere.radius+=this.growth*this.life*this.loader.deltaTimeNormal,this.life-=this.decay*this.loader.deltaTimeNormal,this.mesh.position.y=-2*(1-this.life);let s=.001+this.sphere.radius;this.mesh.scale.set(s,s,s),this.mesh.material.opacity=this.life/3,this.life<=0&&this.destroy(t)}destroy(t){this.geometry.dispose(),this.material.dispose(),this.group.remove(this.mesh),this.array.splice(t,1)}}function y(t){return t.startsWith("#")&&(t=t.substr(1)),parseInt(t,16)}class g{constructor(t,s){this.drops=[],this.ripples=[],this.particles=[],this.size=128,this.cols=48,this.rows=48,this.tick=0,this.dropTick=15,this.dropTickMin=10,this.dropTickMax=30,this.loader=t,this.particleColor=y(s.particleColor),this.rippleColor=y(s.rippleColor),this.dropColor=y(s.dropColor),this.sphereGeometry=new o.Aip(1,16,16),this.boxGeometry=new o.nvb(1,1,1),this.center=new o.Pa4,this.loader.camera.lookAt(this.center),this.particleGroup=new o.Tme,this.particleGroup.scale.set(1,1,1),this.loader.scene.add(this.particleGroup);for(let t=0;t<this.cols;t++)for(let s=0;s<this.rows;s++){let e=p(t,0,this.cols-1,-this.size/2,this.size/2),i=0,h=p(s,0,this.rows-1,-this.size/2,this.size/2);this.particles.push(new d({group:this.particleGroup,x:e,y:i,z:h,size:.01,color:this.particleColor,opacity:.01},this,this.loader))}}createDrop(t,s,e,i){this.drops.push(new c({array:this.drops,group:this.particleGroup,x:void 0===t?l(-this.size/2,this.size/2):t,y:void 0===s?l(30,50):s,z:void 0===e?l(-this.size/2,this.size/2):e,size:.1,color:this.dropColor,opacity:0,strength:i},this,this.loader))}updateDrops(){let t=this.drops.length;for(;t--;)this.drops[t].update(t)}createRipple(t,s,e){this.ripples.push(new u({array:this.ripples,group:this.particleGroup,x:t,y:-.1,z:s,color:this.rippleColor,strength:e},this,this.loader))}updateRipples(){let t=this.ripples.length;for(;t--;)this.ripples[t].update(t)}update(){{let t=this.particles.length;for(;t--;)this.particles[t].update();this.tick>=this.dropTick&&(this.createDrop(),this.dropTick=function(t,s,e){void 0===s&&(s=t,t=0);Math.random();return Math.floor(Math.random()*(s-t+1))+t}(this.dropTickMin,this.dropTickMax),this.tick=0),this.updateDrops(),this.updateRipples()}{let t=this.particles.length;for(;t--;){let s=this.ripples.length;for(;s--;){let e=this.particles[t],i=this.ripples[s].getInfluenceVector(e.base);i.setX(0),i.setZ(0),e.velocity.add(i)}}this.particleGroup.rotation.x=.1*Math.cos(5e-4*this.loader.elapsedMilliseconds),this.particleGroup.rotation.y=.25*Math.PI+-.2*Math.sin(5e-4*this.loader.elapsedMilliseconds)}this.tick+=this.loader.deltaTimeNormal}}class f{constructor(t){this.dom=t,this.raf=null,this.setupTime(),this.setupScene(),this.setupCamera(),this.setupRenderer(),this.listen(),this.onResize(),this.system=new g(this,{particleColor:a(getComputedStyle(this.dom).getPropertyValue("--c-text")).toHexString(),dropColor:a(getComputedStyle(this.dom).getPropertyValue("--c-brand")).toHexString(),rippleColor:a(getComputedStyle(this.dom).getPropertyValue("--c-brand")).toHexString()}),this.loop()}setupTime(){this.timescale=1,this.clock=new o.SUY,this.deltaTimeSeconds=this.clock.getDelta()*this.timescale,this.deltaTimeMilliseconds=1e3*this.deltaTimeSeconds,this.deltaTimeNormal=this.deltaTimeMilliseconds/(1e3/60),this.elapsedMilliseconds=0}setupScene(){this.scene=new o.xsS}setupCamera(){this.camera=new o.cPb(70,0,1e-4,1e4),this.camera.position.x=0,this.camera.position.y=-30,this.camera.position.z=10}setupRenderer(){this.renderer=new o.CP7({alpha:!0,antialias:!0}),this.dom.appendChild(this.renderer.domElement)}update(){this.deltaTimeSeconds=this.clock.getDelta(),this.diffTime&&(this.deltaTimeSeconds-=this.diffTime,this.diffTime=0),this.deltaTimeSeconds*=this.timescale,this.deltaTimeMilliseconds=1e3*this.deltaTimeSeconds,this.deltaTimeNormal=this.deltaTimeMilliseconds/(1e3/60),this.elapsedMilliseconds+=this.deltaTimeMilliseconds,this.system.update()}render(){this.renderer.render(this.scene,this.camera)}listen(){window.addEventListener("resize",(t=>this.onResize(t)))}onResize(){const t=this.dom.offsetWidth,s=this.dom.offsetHeight;this.camera.aspect=t/s,this.camera.updateProjectionMatrix(),this.renderer.setPixelRatio(window.devicePixelRatio>1?2:1),this.renderer.setSize(t,s)}loop(){this.update(),this.render(),this.raf=window.requestAnimationFrame((()=>this.loop()))}destroy(){window.cancelAnimationFrame(this.raf)}}const z={props:{},setup(t,s){const e=(0,r.iH)(null);return(0,i.bv)((()=>{const t=new f(e.value);(0,i.Ah)((()=>{t.destroy()}))})),{container:e}}},w=(0,e(3744).Z)(z,[["render",function(t,s,e,r,o,a){return(0,i.wg)(),(0,i.iD)("div",{ref:"container",class:(0,h.C_)(t.$style.container)},null,2)}],["__cssModules",{$style:{container:"container_dCANI73B"}}]])}}]);